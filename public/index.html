<!DOCTYPE html>
<html lang="en">
<head>
  <title>Weight & Balance</title>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/x-icon" href="/logo-aw.png">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="" />
  <link rel="stylesheet" type="text/css" href="index.css"/>
</head>
<body>
  <div id="app">
    <div>
      <label for="planes">Samolot:</label>
      <select @change="getPlaneData($event)" v-model="selectedPlane" name="planes" id="planes" autocomplete="off">
        <option disabled selected value>wybierz</option>
        <option v-for="plane in planesList" :value="plane">{{plane.replace(/\.json/,'')}}</option>
      </select>
    
      <form id="inputs">
        <template v-if="planeData">
          <span></span>
          <span>Ilość</span>
          <span>Masa</span>
          <span>Ramię</span>
          <span>Moment</span>
        </template>
        <template v-for="load in planeData.loads">
          <label :for="load.name">{{load.label}}
            <template v-if="load.unit">[{{load.unit}} * {{load.density}}]</template>
          </label>
          <input
            :disabled="load.inputDisabled"
            :type="load.inputType"
            min="0"
            :max="load.max"
            v-model="load.value"
            :name="load.name"
            />
          <span>{{loadWeight(load) || '0'}} kg</span>
          <span>{{load.arm || '-'}}</span>
          <span>{{loadMoment(load) || '0'}}</span>
        </template>
        <template v-if="planeData">
          <span></span>
          <span></span>
          <span>{{totalWeight && `${totalWeight} kg`}}</span>
          <span>{{cogArm && `${cogArm}`}}</span>
          <span>{{totalMoment && `${totalMoment}`}}</span>
        </template>
      </form>
    </div>
    <Chart
      v-if="planeData"
      :plane-data="planeData"
      :weight="totalWeight"
      :cog-arm="cogArm"
    ></Chart>
  </div>

  <script type="module">
    import { createApp } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    import App from '/App.js'
    import Chart from '/Chart.js'
    const app = createApp(App)
    app.component('Chart', Chart)
    const mountedApp = app.mount('#app')
  </script>

</body>
</html>